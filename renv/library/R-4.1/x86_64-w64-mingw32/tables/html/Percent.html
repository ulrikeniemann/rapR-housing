<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Pseudo-function to compute a statistic relative to a...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for Percent {tables}"><tr><td>Percent {tables}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>
Pseudo-function to compute a statistic relative to a reference
set.
</h2>

<h3>Description</h3>

<p>The <code>Percent</code> pseudo-function is used to specify
a statistic that depends on other values in the table.
</p>


<h3>Usage</h3>

<pre>
Percent(denom = "all", fn = percent)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>denom</code></td>
<td>

<p>How the reference set (the denominator in case
of a percentage calculation) should be calculated.  See below.
</p>
</td></tr>
<tr valign="top"><td><code>fn</code></td>
<td>

<p>The two argument function to calculate the statistic.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>fn</code> will be called with two
arguments.  The first argument is the usual &ldquo;value vector&rdquo; 
of values
corresponding to this cell in the table,
and the second 
is another vector of reference values, determined
by <code>denom</code>.  
</p>
<p>The default value of <code>fn</code> is the <code>percent</code> function,
defined as <code>function(x, y) 100*length(x)/length(y)</code>.  This
gives the ratio of the number of values in the current cell
relative to the reference values, expressed as a percentage.
Using <code>fn = function(x, y) 100*sum(x)/sum(y)</code> would give
the percentage of the sum of the values in the current cell to
the sum in the reference set.
</p>
<p>With the default <code>denom = "all"</code>, all values of the
analysis variable in the dataset are used as the reference.  Other possibilities
are <code>denom = "row"</code> or <code>denom = "col"</code>, for which
the values of the variable corresponding to the current row
or column subset are used.  
</p>
<p>The special syntax <code>denom = Equal(...)</code> will record 
each expression in <code>...</code>.  The
reference set will be the cases with equal values of all
expressions in <code>...</code> to those of the current cell.
The similar form <code>denom = Unequal(...)</code>
sets the reference values to be those that differ in any
of the <code>...</code> expressions from the current cell.  (In
fact, these can be used somewhat more generally; see the 
vignette for details.)
</p>
<p>Finally, other possible <code>denom</code> values 
are a logical vector, in which
case the values marked <code>TRUE</code> are used, or anything else, which will
be passed to <code>fn</code> as <code>y</code> without any subsetting.  (To pass a variable with subsetting,
use the <code><a href="../../tables/help/Arguments.html">Arguments</a></code> pseudo-function instead.)
</p>


<h3>Pseudo-functions</h3>

<p><code>Percent</code> is a &ldquo;pseudo-function&rdquo;:  it takes the form of a function call, but is
never actually called:  it is 
handled specially by <code><a href="../../tables/help/tabular.html">tabular</a></code>.  <code>Equal</code> and <code>Unequal</code>
are also pseudo-functions, but are only special when used
in the <code>denom</code> argument to <code>Percent</code>.
</p>


<h3>See Also</h3>

<p><code><a href="../../tables/help/Arguments.html">Arguments</a></code> for a different way to specify
a multiple argument analysis function.</p>


<h3>Examples</h3>

<pre>
x &lt;- factor(sample(LETTERS[1:2], 1000, rep=TRUE))
y &lt;- factor(sample(letters[3:4], 1000, rep=TRUE))
z &lt;- factor(sample(LETTERS[5:6], 1000, rep=TRUE))

# These both do the same thing:
tabular( (x + 1)*(y + 1) ~ (z + 1)*(1+(RowPct=Percent("row"))))
tabular( (x + 1)*(y + 1) ~ (z + 1)*(1+(xyPct=Percent(Equal(x, y)))))
</pre>

<hr /><div style="text-align: center;">[Package <em>tables</em> version 0.9.17 <a href="00Index.html">Index</a>]</div>
</body></html>
